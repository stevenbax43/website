{% extends 'home/base.html'%}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="{% static 'tools/styles/tools.css'%}">
  <link rel="stylesheet" href="{% static 'tools/styles/tool_W_5.css'%}">
  
{% endblock %}

{% block content_wrapper_start %}{% endblock %}
{% block content_wrapper_end %}{% endblock %}

{% block content %}
{% csrf_token %}

<!-- HERO -->
  <header class="tools-hero">
  <div class="container py-3">
    <div class="row align-items-center g-3 flex-nowrap">
      <div class="col">
        <h1 class="display-6 mb-0 text-white ">Tool W5: Inhoud Buffervat</h1>
      </div>
      <div class="col-auto">
        <a href="{% url 'tools:tools' %}" class="d-inline-block">
          <img src="{% static 'tools/images/engineering.png' %}" class="hero-icon flex-shrink-0" alt="Engineering">
        </a>
      </div>
    </div>
  </div>
</header>



<!-- INTRO -->
<section class="bg-light py-3 no-print">
  <div class="container">
    <div class="row align-items-center g-3">
      <div class="col-12 col-lg-8">
        <p class="mb-0">
          Buffervaten worden toegepast om de warmte- of koudeproductie gelijkmatiger te verdelen. Hierdoor
          hoeft de compressor bij een warmtepomp minder vaak in- en uit te schakelen.
        </p>
      </div>
      <div class="col-12 col-lg-4 d-flex justify-content-lg-end align-items-center gap-3 flex-wrap">
        <a href="{% url 'tools:tool-readme' 'W5' %}" target="_blank" rel="noopener" class="intro-link d-inline-flex align-items-center gap-2">
          ReadMe <img src="{% static 'tools/images/PDF-icon.png' %}" class="icon-30 icon-pdf-red" alt="PDF">
        </a>
        <a href="#" id="printButton" class="intro-link d-inline-flex align-items-center">
          <img src="{% static 'tools/images/print.png' %}" class="icon-30" alt="Print">
        </a>
        <a href="#" id="excelButton" class="intro-link d-inline-flex align-items-center">
          <img src="{% static 'tools/images/Excel.png' %}" class="icon-30" alt="Excel">
        </a>
      </div>
    </div>
  </div>
</section>

<!-- MAIN -->
<section class="py-3">
  <div class="container">
    <form method="post" id="inputForm">
      {% csrf_token %}

      <div class="row g-3">
        <!-- Inputs -->
        <div class="col-12 col-lg-4">
          <div class="card card-input shadow-sm" data-chip="Input">
            <div class="card-body">
              <h4 class="h6 mb-3">Systeemeigenschappen</h4>

              <div class="mb-3">
                <label for="max_vermogen" class="form-label">Totaal vermogen (&Phi;<sub>tot</sub>)</label>
                <div class="input-group">
                  <input type="number" class="form-control" id="max_vermogen" name="max_vermogen" value="100" min="0" required>
                  <span class="input-group-text">kW</span>
                </div>
              </div>
              <div class="mb-3">
                <label for="min_vermogen" class="form-label">Min. capaciteitsstrap compressor (N)</label>
                <div class="input-group">
                  <input type="number" class="form-control" id="min_vermogen" name="min_vermogen" value="30" min="0" required>
                  <span class="input-group-text">%</span>
                </div>
              </div>

              <div class="mb-3">
                <label for="temp_verschil" class="form-label">Temperatuurverschil (&Delta;T)</label>
                <div class="input-group">
                  <input type="number" class="form-control" id="temp_verschil" name="temp_verschil" value="5" min="0" max="100" required>
                  <span class="input-group-text">K</span>
                </div>
              </div>

              <div class="mb-3">
                <label for="tijd_aan" class="form-label">Tijdsinterval tussen AAN & UIT (t<sub>aan</sub>)</label>
                <div class="input-group">
                  <input type="number" class="form-control" id="tijd_aan" name="tijd_aan" value="10" min="0" max="100" required>
                  <span class="input-group-text">min</span>
                </div>
              </div>

              <div class="mb-3">
                <label for="soortelijke_warmte" class="form-label">Soortelijke warmte (c<sub>v</sub>)</label>
                <div class="input-group">
                  <input type="number" class="form-control" id="soortelijke_warmte" name="soortelijke_warmte" value="4.2" min="0" max="100" step="0.1" required>
                  <span class="input-group-text">kJ/kgK</span>
                </div>
              </div>

              <div class="mb-0">
                <label for="dichtheid" class="form-label">Dichtheid (&rho;)</label>
                <div class="input-group">
                  <input type="number" class="form-control" id="dichtheid" name="dichtheid" value="998" min="0" max="2000" required>
                  <span class="input-group-text">kg/m<sup>3</sup></span>
                </div>
              </div>

              <!-- Hidden submit (Bootstrap-safe) -->
              <button type="submit" class="visually-hidden" id="calculateButton" name="calculateButton"></button>
            </div>
          </div>
        </div>

        <!-- Advice / Image -->
        <div class="col-12 col-lg-4">
          <div class="card card-output shadow-sm h-100" data-chip="Output">
            <div class="card-body">
              <h4 class="h6 mb-3">Advies Buffervat</h4>
              <div class="image-container">
                <img src="{% static 'tools/images/buffervat.png' %}" alt="Inhoud buffervat">
                <div class="overlay">{{ buffervat_output.0 }} L</div>
              </div>
              <h6 class="h6 mt-auto">* V = {{ buffervat_output.0 }}L &rarr; <strong>de minimale actieve systeeminhoud</strong> </h6>
            </div>
          </div>
        </div>

        <!-- Given values + Formula -->
        <div class="col-12 col-lg-4">
          <div class="card card-output shadow-sm h-100" data-chip="Output">
            <div class="card-body">
              <h4 class="h6 mb-3">Gegeven waarden</h4>
              <div class="mb-3">
                &Phi;<sub>min</sub> = {{ buffervat_output.1 }} kW<br>
                &Delta;T = {{ buffervat_output.2 }} K<br>
                t<sub>aan</sub> = {{ buffervat_output.3 }} min<br>
                c<sub>v</sub> = {{ buffervat_output.4 }} kJ/kgK<br>
                &rho; = {{ buffervat_output.5 }} kg/m<sup>3</sup>
              </div>
              <hr>
              <h4 class="h4 mb-4">Formule (ISSO 81):</h4>
              <p class="h3 mb-0">
                \(
                  V[L] \;=\;
                  \frac{1000 \cdot \Phi_{\min} \cdot t_{\mathrm{aan}} \cdot 60}
                       {\rho \cdot c_{v} \cdot \Delta T}
                \)
              </p>
            </div>
          </div>
        </div>
      </div> <!-- /row -->
    </form>
  </div>
</section>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'tools/scripts/script_tools_W5.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>pdfUrlExcel = "{% static 'tools/files/TOOL_W5_Buffervat.xlsx' %}"</script>
{% endblock %}
